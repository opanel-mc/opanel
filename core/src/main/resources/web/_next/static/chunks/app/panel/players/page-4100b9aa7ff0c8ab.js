(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{16103:(e,t,s)=>{"use strict";s.d(t,{B6:()=>l,CB:()=>f,EW:()=>x,HQ:()=>c,Hy:()=>r,Q4:()=>u,_L:()=>d,lE:()=>h,zf:()=>o});var a=s(56671),i=s(31886),n=s(53999);async function r(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,i.ow)("/api/players/op?uuid=".concat(e)),t&&a.oR.success("成功给予该玩家OP权限")}catch(e){(0,i.Kf)(e,"无法给予该玩家OP权限",[[400,"请求参数错误"],[401,"未登录"]])}}async function l(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,i.ow)("/api/players/deop?uuid=".concat(e)),t&&a.oR.success("成功解除该玩家OP权限")}catch(e){(0,i.Kf)(e,"无法解除该玩家OP权限",[[400,"请求参数错误"],[401,"未登录"]])}}async function c(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,i.ow)("/api/players/kick?uuid=".concat(e,"&r=").concat(t)),s&&a.oR.success("已踢出该玩家")}catch(e){(0,i.Kf)(e,"无法踢出该玩家",[[400,"请求参数错误"],[401,"未登录"],[403,"该玩家不在线"]])}}async function d(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,i.ow)("/api/players/ban?uuid=".concat(e,"&r=").concat(t)),s&&a.oR.success("已封禁该玩家")}catch(e){(0,i.Kf)(e,"无法封禁该玩家",[[400,"请求参数错误"],[401,"未登录"]])}}async function o(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,i.ow)("/api/players/pardon?uuid=".concat(e)),t&&a.oR.success("已解封该玩家")}catch(e){(0,i.Kf)(e,"无法解封该玩家",[[400,"请求参数错误"],[401,"未登录"]])}}async function u(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,i.ow)("/api/players/gamemode?uuid=".concat(e,"&gm=").concat(t)),s&&a.oR.success("已将该玩家的游戏模式设置为"+(0,n.Cq)(t))}catch(e){(0,i.Kf)(e,"无法设置该玩家的游戏模式",[[400,"请求参数错误"],[401,"未登录"]])}}async function h(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,i.ow)("/api/whitelist/".concat(e?"enable":"disable")),t&&a.oR.success("已".concat(e?"启用":"禁用","白名单"))}catch(t){(0,i.Kf)(t,"无法".concat(e?"启用":"禁用","白名单"),[[401,"未登录"],[500,"服务器内部错误"]])}}async function x(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,i.ow)("/api/whitelist/add?name=".concat(e,"&uuid=").concat(t)),s&&a.oR.success("已将该玩家加入白名单")}catch(e){(0,i.Kf)(e,"无法将该玩家加入白名单",[[400,"请求参数错误"],[401,"未登录"],[500,"服务器内部错误"]])}}async function f(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,i.ow)("/api/whitelist/remove?name=".concat(e,"&uuid=").concat(t)),s&&a.oR.success("已将该玩家移出白名单")}catch(e){(0,i.Kf)(e,"无法将该玩家移出白名单",[[400,"请求参数错误"],[401,"未登录"],[500,"服务器内部错误"]])}}},19832:(e,t,s)=>{"use strict";s.d(t,{P:()=>i});var a=s(19087);let i=new(s.n(a)())},30347:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>X});var a=s(95155),i=s(12115),n=s(17580),r=s(17881),l=s(42996),c=s(30064),d=s(53999);function o(e){let{className:t,...s}=e;return(0,a.jsx)(c.bL,{"data-slot":"tabs",className:(0,d.cn)("flex flex-col gap-2",t),...s})}function u(e){let{className:t,...s}=e;return(0,a.jsx)(c.B8,{"data-slot":"tabs-list",className:(0,d.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function h(e){let{className:t,...s}=e;return(0,a.jsx)(c.l9,{"data-slot":"tabs-trigger",className:(0,d.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function x(e){let{className:t,...s}=e;return(0,a.jsx)(c.UC,{"data-slot":"tabs-content",className:(0,d.cn)("flex-1 outline-none",t),...s})}var f=s(62108),g=s(31886),m=s(5196),j=s(75494),p=s(12318),v=s(97092),b=s(6877),y=s(28113),w=s(37777),N=s(97168),k=s(99840),C=s(82714),z=s(89852);function P(e){let{title:t,description:s,label:n,placeholder:r,onAction:l,asChild:c,children:d}=e,o=(0,i.useRef)(null);return(0,a.jsxs)(k.lG,{children:[(0,a.jsx)(k.zM,{asChild:c,children:d}),(0,a.jsxs)(k.Cf,{children:[(0,a.jsxs)(k.c7,{children:[(0,a.jsx)(k.L3,{children:t}),s&&(0,a.jsx)(k.rr,{children:s})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(C.J,{children:n}),(0,a.jsx)(z.p,{placeholder:r,ref:o})]}),(0,a.jsxs)(k.Es,{children:[(0,a.jsx)(k.HM,{asChild:!0,children:(0,a.jsx)(N.$,{variant:"outline",children:"取消"})}),(0,a.jsx)(k.HM,{asChild:!0,children:(0,a.jsx)(N.$,{onClick:()=>{o.current&&l&&l(o.current.value)},children:"确定"})})]})]})]})}var A=s(88145);function O(e){let{isOnline:t,className:s}=e;return(0,a.jsxs)(A.E,{variant:"outline",children:[(0,a.jsx)("div",{className:(0,d.cn)("w-2 h-2 rounded-full",t?"bg-green-600":"bg-muted-foreground",s)}),t?"在线":"离线"]})}var K=s(16103),_=s(62177),$=s(48778),R=s(71153),E=s(41085),W=s(30070),H=s(23291),F=s(91503);function M(e){let{uuid:t}=e,s=(0,i.useRef)(null);return(0,i.useEffect)(()=>{s.current&&new F.A({canvas:s.current,skin:g.Hh+t,cape:g.v_+t})},[t]),(0,a.jsx)("canvas",{ref:s})}var V=s(95784),S=s(90088),B=s(19832);let L=R.z.object({gamemode:R.z.enum(Object.values(H.U)),isOp:R.z.boolean()});function q(e){var t;let{player:s,children:i,asChild:n}=e,r=(0,_.mN)({resolver:(0,$.u)(L),values:{gamemode:null!=(t=s.gamemode)?t:"adventure",isOp:s.isOp}}),l=async e=>{e.gamemode!==s.gamemode&&await (0,K.Q4)(s.uuid,e.gamemode,!1),e.isOp!==s.isOp&&(s.isOp?await (0,K.B6)(s.uuid,!1):await (0,K.Hy)(s.uuid,!1)),B.P.emit("refresh-data")};return(0,a.jsxs)(E.cj,{children:[(0,a.jsx)(E.CG,{asChild:n,children:i}),(0,a.jsx)(E.h,{children:(0,a.jsx)(W.lV,{...r,children:(0,a.jsxs)("form",{className:"flex-1 flex flex-col",onSubmit:r.handleSubmit(l),children:[(0,a.jsxs)(E.Fm,{children:[(0,a.jsx)(E.qp,{children:"编辑玩家"}),(0,a.jsx)(E.Qs,{children:"在此设置和管理该玩家的状态和角色。"})]}),(0,a.jsxs)("div",{className:"flex-1 px-4 flex flex-col gap-5",children:[(0,a.jsx)(M,{uuid:s.uuid}),(0,a.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,a.jsx)(O,{isOnline:s.isOnline}),(0,a.jsx)("h2",{className:"inline-block text-lg font-semibold",children:s.name})]}),(0,a.jsx)(W.zB,{control:r.control,name:"gamemode",render:e=>{let{field:t}=e;return(0,a.jsxs)(W.eI,{children:[(0,a.jsx)(W.lR,{children:"游戏模式"}),(0,a.jsx)(W.MJ,{children:(0,a.jsxs)(V.l6,{...t,onValueChange:t.onChange,children:[(0,a.jsx)(V.bq,{className:"w-full",children:(0,a.jsx)(V.yv,{})}),(0,a.jsxs)(V.gC,{children:[(0,a.jsx)(V.eb,{value:"adventure",children:"冒险"}),(0,a.jsx)(V.eb,{value:"survival",children:"生存"}),(0,a.jsx)(V.eb,{value:"creative",children:"创造"}),(0,a.jsx)(V.eb,{value:"spectator",children:"旁观"})]})]})}),(0,a.jsx)(W.C5,{})]})}}),(0,a.jsx)(W.zB,{control:r.control,name:"isOp",render:e=>{let{field:t}=e;return(0,a.jsxs)(W.eI,{className:"flex justify-between",children:[(0,a.jsx)(W.lR,{children:"OP权限"}),(0,a.jsx)(W.MJ,{children:(0,a.jsx)(S.d,{...t,value:"",defaultChecked:s.isOp,onCheckedChange:t.onChange})}),(0,a.jsx)(W.C5,{})]})}}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(C.J,{children:"管理"}),(0,a.jsxs)("div",{className:"grid grid-rows-2 grid-cols-2 gap-2 [&>*]:cursor-pointer",children:[void 0!==s.isWhitelisted&&(s.isWhitelisted?(0,a.jsxs)(N.$,{variant:"outline",onClick:async()=>{await (0,K.CB)(s.name,s.uuid),B.P.emit("refresh-data")},children:[(0,a.jsx)(j.A,{}),"移出白名单"]}):(0,a.jsxs)(N.$,{variant:"outline",onClick:async()=>{await (0,K.EW)(s.name,s.uuid),B.P.emit("refresh-data")},children:[(0,a.jsx)(p.A,{}),"加入白名单"]})),(0,a.jsx)(P,{title:"踢出玩家",description:"将玩家踢出服务器，之后玩家可重新加入服务器",label:"原因",placeholder:"请输入踢出原因...",onAction:async e=>{await (0,K.HQ)(s.uuid,e),B.P.emit("refresh-data")},asChild:!0,children:(0,a.jsxs)(N.$,{variant:"outline",className:void 0===s.isWhitelisted?"col-start-1":"col-start-2",disabled:!s.isOnline,children:[(0,a.jsx)(v.A,{}),"踢出服务器"]})}),s.isBanned?(0,a.jsxs)(N.$,{variant:"outline",className:void 0===s.isWhitelisted?"col-start-2":"col-span-2",onClick:async()=>{await (0,K.zf)(s.uuid),B.P.emit("refresh-data")},children:[(0,a.jsx)(y.A,{}),"解除封禁"]}):(0,a.jsx)(P,{title:"封禁玩家",description:"将玩家踢出服务器并加入封禁列表，之后玩家将不可重新加入服务器",label:"原因",placeholder:"请输入封禁原因...",onAction:async e=>{await (0,K._L)(s.uuid,e),B.P.emit("refresh-data")},asChild:!0,children:(0,a.jsxs)(N.$,{variant:"destructive",className:void 0===s.isWhitelisted?"col-start-2":"col-span-2",children:[(0,a.jsx)(b.A,{}),"封禁玩家"]})})]})]})]}),(0,a.jsxs)(E.XW,{children:[(0,a.jsx)(E.kN,{asChild:!0,children:(0,a.jsx)(N.$,{type:"submit",className:"cursor-pointer",children:"确定"})}),(0,a.jsx)(E.kN,{asChild:!0,children:(0,a.jsx)(N.$,{variant:"outline",className:"cursor-pointer",children:"取消"})})]})]})})})]})}let I=[{accessorKey:"name",header:"玩家名",cell:e=>{let{row:t}=e,{name:s,uuid:i}=t.original;return(0,a.jsxs)(w.m_,{children:[(0,a.jsx)(w.k$,{children:(0,a.jsx)(q,{player:t.original,asChild:!0,children:(0,a.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("img",{src:g.nF+i,alt:s,width:17,height:17}),(0,a.jsx)("span",{className:"font-semibold",children:s})]})})}),(0,a.jsx)(w.ZI,{children:i})]})}},{accessorKey:"isOnline",header:()=>(0,a.jsx)("div",{className:"text-center",children:"状态"}),cell:e=>{let{row:t}=e,{isOnline:s}=t.original;return(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(O,{isOnline:s})})}},{accessorKey:"uuid",header:"",cell:""},{accessorKey:"gamemode",header:()=>(0,a.jsx)("div",{className:"text-center",children:"游戏模式"}),cell:e=>{let{row:t}=e,{gamemode:s}=t.original;return s?(0,a.jsx)("div",{className:"text-center",children:(0,d.Cq)(s)}):(0,a.jsx)(a.Fragment,{})}},{accessorKey:"isWhitelisted",header:()=>(0,a.jsx)("div",{className:"text-center",children:"白名单"}),cell:e=>{let{row:t,column:s}=e;return(0,i.useEffect)(()=>{s.toggleVisibility(void 0!==t.original.isWhitelisted)},[t,s]),(0,a.jsx)("div",{className:"flex justify-center",children:t.original.isWhitelisted?(0,a.jsx)(m.A,{size:18,color:"var(--color-muted-foreground)"}):(0,a.jsx)(a.Fragment,{})})}},{accessorKey:"isOp",header:()=>(0,a.jsx)("div",{className:"text-center",children:"OP"}),cell:e=>{let{row:t}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:t.original.isOp?(0,a.jsx)(m.A,{size:18,color:"var(--color-muted-foreground)"}):(0,a.jsx)(a.Fragment,{})})}},{header:" ",cell:e=>{let{row:t}=e,{name:s,uuid:i,isOnline:n,isWhitelisted:r}=t.original;return(0,a.jsxs)("div",{className:"flex justify-end [&>*]:h-4 [&>*]:cursor-pointer [&>*]:hover:!bg-transparent",children:[void 0!==r&&(r?(0,a.jsx)(N.$,{variant:"ghost",size:"icon",title:"移出白名单",onClick:async()=>{await (0,K.CB)(s,i),B.P.emit("refresh-data")},children:(0,a.jsx)(j.A,{})}):(0,a.jsx)(N.$,{variant:"ghost",size:"icon",title:"加入白名单",onClick:async()=>{await (0,K.EW)(s,i),B.P.emit("refresh-data")},children:(0,a.jsx)(p.A,{})})),n&&(0,a.jsx)(P,{title:"踢出玩家",description:"将玩家踢出服务器，之后玩家可重新加入服务器",label:"原因",placeholder:"请输入踢出原因...",onAction:async e=>{await (0,K.HQ)(i,e),B.P.emit("refresh-data")},asChild:!0,children:(0,a.jsx)(N.$,{variant:"ghost",size:"icon",title:"踢出服务器",children:(0,a.jsx)(v.A,{})})}),(0,a.jsx)(P,{title:"封禁玩家",description:"将玩家踢出服务器并加入封禁列表，之后玩家将不可重新加入服务器",label:"原因",placeholder:"请输入封禁原因...",onAction:async e=>{await (0,K._L)(i,e),B.P.emit("refresh-data")},asChild:!0,children:(0,a.jsx)(N.$,{variant:"ghost",size:"icon",title:"封禁玩家",children:(0,a.jsx)(b.A,{className:"stroke-red-400"})})})]})}}],Q=[{accessorKey:"name",header:"玩家名",cell:e=>{let{row:t}=e,{name:s,uuid:i}=t.original;return(0,a.jsxs)(w.m_,{children:[(0,a.jsx)(w.k$,{children:(0,a.jsx)(q,{player:t.original,asChild:!0,children:(0,a.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("img",{src:g.nF+i,alt:s,width:17,height:17}),(0,a.jsx)("span",{className:"font-semibold",children:s})]})})}),(0,a.jsx)(w.ZI,{children:i})]})}},{accessorKey:"banReason",header:"封禁原因"},{accessorKey:"uuid",header:"",cell:""},{accessorKey:"isOp",header:()=>(0,a.jsx)("div",{className:"text-center",children:"OP"}),cell:e=>{let{row:t}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:t.original.isOp?(0,a.jsx)(m.A,{size:18,color:"var(--color-muted-foreground)"}):(0,a.jsx)(a.Fragment,{})})}},{header:" ",cell:e=>{let{row:t}=e;return(0,a.jsx)(N.$,{variant:"ghost",size:"icon",className:"float-right h-4 cursor-pointer hover:!bg-transparent",title:"解除封禁",onClick:async()=>{await (0,K.zf)(t.original.uuid),B.P.emit("refresh-data")},children:(0,a.jsx)(y.A,{className:"stroke-green-600"})})}}];var J=s(24232),T=s(86801);function X(){let[e,t]=(0,i.useState)([]),[s,c]=(0,i.useState)(0),[d,m]=(0,i.useState)(!1),[j,p]=(0,i.useState)("player-list"),v=async()=>{try{let e=await (0,g.qV)("/api/players");t(e.players),c(e.maxPlayerCount),m(e.whitelist)}catch(e){(0,g.Kf)(e,"无法获取玩家列表",[[400,"请求参数错误"],[401,"未登录"],[500,"服务器内部错误"]])}};return(0,i.useEffect)(()=>{v(),B.P.on("refresh-data",()=>v())},[]),(0,a.jsxs)(J.C,{title:"玩家",subTitle:"player-list"===j?"玩家列表":"封禁列表",icon:(0,a.jsx)(n.A,{}),className:"flex flex-col gap-3",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"点击玩家名以进行更多操作。"}),(0,a.jsxs)(o,{defaultValue:"player-list",onValueChange:p,children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(u,{className:"[&>*]:cursor-pointer",children:[(0,a.jsx)(h,{value:"player-list",children:"玩家列表 (".concat(e.filter(e=>{let{isOnline:t}=e;return t}).length," / ").concat(s,")")}),(0,a.jsx)(h,{value:"banned-list",children:"封禁列表 (".concat(e.filter(e=>{let{isBanned:t}=e;return t}).length,")")})]}),d?(0,a.jsx)(T.T,{asChild:!0,children:(0,a.jsxs)(N.$,{variant:"outline",className:"cursor-pointer",children:[(0,a.jsx)(r.A,{}),"编辑白名单"]})}):(0,a.jsxs)(N.$,{variant:"outline",className:"cursor-pointer",onClick:async()=>{await (0,K.lE)(!0),v()},children:[(0,a.jsx)(l.A,{}),"启用白名单"]})]}),(0,a.jsx)(x,{value:"player-list",children:(0,a.jsx)(f.b,{columns:I,data:e.filter(e=>{let{isBanned:t}=e;return!t}),pagination:!0,fallbackMessage:"暂无玩家"})}),(0,a.jsx)(x,{value:"banned-list",children:(0,a.jsx)(f.b,{columns:Q,data:e.filter(e=>{let{isBanned:t}=e;return t}),pagination:!0,fallbackMessage:"暂无玩家"})})]})]})}},53571:(e,t,s)=>{Promise.resolve().then(s.bind(s,30347))},62108:(e,t,s)=>{"use strict";s.d(t,{b:()=>f});var a=s(95155),i=s(12115),n=s(52278),r=s(42355),l=s(13052),c=s(12767),d=s(36268),o=s(11032),u=s(88524),h=s(53999),x=s(97168);function f(e){var t;let{columns:s,data:f,pagination:g=!1,fallbackMessage:m="暂无数据",className:j}=e,[p,v]=(0,i.useState)({pageIndex:0,pageSize:10}),b=(0,d.N4)({columns:s,data:f,getCoreRowModel:(0,o.HT)(),getPaginationRowModel:g?(0,o.kW)():void 0,onPaginationChange:v,state:{pagination:p}});return(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)("div",{className:(0,h.cn)(j,"border rounded-md"),children:(0,a.jsxs)(u.XI,{children:[(0,a.jsx)(u.A0,{children:b.getHeaderGroups().map(e=>(0,a.jsx)(u.Hj,{children:e.headers.map(e=>(0,a.jsx)(u.nd,{children:e.isPlaceholder?null:(0,d.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(u.BF,{children:(null==(t=b.getRowModel().rows)?void 0:t.length)?b.getRowModel().rows.map(e=>(0,a.jsx)(u.Hj,{children:e.getVisibleCells().map(e=>(0,a.jsx)(u.nA,{children:(0,d.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(u.Hj,{className:"hover:bg-transparent",children:(0,a.jsx)(u.nA,{colSpan:s.length,className:"h-24 text-center",children:m})})})]})}),g&&(0,a.jsxs)("div",{className:"flex gap-3 items-center [&>button]:cursor-pointer",children:[(0,a.jsx)(x.$,{variant:"outline",size:"icon",title:"跳转至第一页",onClick:()=>b.firstPage(),disabled:!b.getCanPreviousPage(),children:(0,a.jsx)(n.A,{})}),(0,a.jsxs)(x.$,{variant:"outline",onClick:()=>b.previousPage(),disabled:!b.getCanPreviousPage(),children:[(0,a.jsx)(r.A,{}),"上一页"]}),(0,a.jsxs)(x.$,{variant:"outline",onClick:()=>b.nextPage(),disabled:!b.getCanNextPage(),children:["下一页",(0,a.jsx)(l.A,{})]}),(0,a.jsx)(x.$,{variant:"outline",size:"icon",title:"跳转至最后一页",onClick:()=>b.lastPage(),disabled:!b.getCanNextPage(),children:(0,a.jsx)(c.A,{})}),(0,a.jsxs)("span",{className:"text-muted-foreground text-sm",children:["第 ",p.pageIndex+1," 页 / 共 ",b.getPageCount()," 页"]})]})]})}},86801:(e,t,s)=>{"use strict";s.d(t,{T:()=>x});var a=s(95155),i=s(12115),n=s(91364),r=s(51362),l=s(56671),c=s(41085),d=s(97168),o=s(31886),u=s(16103),h=s(52815);function x(e){let{children:t,asChild:s}=e,[x,f]=(0,i.useState)(""),{theme:g}=(0,r.D)(),m=(0,i.useRef)(null),j=async()=>{try{let e=await (0,o.qV)("/api/whitelist");f(JSON.stringify(e.whitelist,void 0,2))}catch(e){(0,o.Kf)(e,"无法获取白名单",[[401,"未登录"],[500,"服务器内部错误"]])}},p=async()=>{if(m.current&&m.current.getValue()!==x)try{await (0,o.ow)("/api/whitelist/write",JSON.parse(m.current.getValue())),l.oR.success("保存成功")}catch(e){(0,o.Kf)(e,"无法保存白名单",[[401,"未登录"],[500,"服务器内部错误"]])}};return(0,a.jsxs)(c.cj,{onOpenChange:e=>e&&j(),children:[(0,a.jsx)(c.CG,{asChild:s,children:t}),(0,a.jsxs)(c.h,{children:[(0,a.jsxs)(c.Fm,{children:[(0,a.jsx)(c.qp,{children:"编辑白名单"}),(0,a.jsxs)(c.Qs,{children:["在此编辑服务器玩家白名单，你也可以直接编辑服务器目录下的",(0,a.jsx)("code",{children:"whitelist.json"}),"文件。"]})]}),(0,a.jsx)("div",{className:"flex flex-col h-full",children:x&&(0,a.jsx)(n.KE,{defaultLanguage:"json",defaultValue:x,theme:"dark"===g?"vs-dark":"vs",options:{minimap:{enabled:!1},automaticLayout:!0,...h.FN},onMount:e=>m.current=e})}),(0,a.jsxs)(c.XW,{children:[(0,a.jsx)(d.$,{variant:"destructive",className:"cursor-pointer",onClick:async()=>{await (0,u.lE)(!1),window.location.reload()},children:"禁用白名单"}),(0,a.jsx)(c.kN,{asChild:!0,children:(0,a.jsx)(d.$,{className:"cursor-pointer",onClick:()=>p(),children:"保存设置"})})]})]})]})}},88145:(e,t,s)=>{"use strict";s.d(t,{E:()=>c});var a=s(95155);s(12115);var i=s(99708),n=s(74466),r=s(53999);let l=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,asChild:n=!1,...c}=e,d=n?i.DX:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,r.cn)(l({variant:s}),t),...c})}},88524:(e,t,s)=>{"use strict";s.d(t,{A0:()=>r,BF:()=>l,Hj:()=>c,XI:()=>n,nA:()=>o,nd:()=>d});var a=s(95155);s(12115);var i=s(53999);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,i.cn)("w-full caption-bottom text-sm",t),...s})})}function r(e){let{className:t,...s}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,i.cn)("[&_tr]:border-b",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,i.cn)("[&_tr:last-child]:border-0",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,i.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,i.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,i.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}},90088:(e,t,s)=>{"use strict";s.d(t,{d:()=>r});var a=s(95155);s(12115);var i=s(4884),n=s(53999);function r(e){let{className:t,...s}=e;return(0,a.jsx)(i.bL,{"data-slot":"switch",className:(0,n.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:(0,a.jsx)(i.zi,{"data-slot":"switch-thumb",className:(0,n.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},95784:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>x,gC:()=>h,l6:()=>d,yv:()=>o});var a=s(95155);s(12115);var i=s(14582),n=s(66474),r=s(5196),l=s(47863),c=s(53999);function d(e){let{...t}=e;return(0,a.jsx)(i.bL,{"data-slot":"select",...t})}function o(e){let{...t}=e;return(0,a.jsx)(i.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:s="default",children:r,...l}=e;return(0,a.jsxs)(i.l9,{"data-slot":"select-trigger","data-size":s,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[r,(0,a.jsx)(i.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function h(e){let{className:t,children:s,position:n="popper",...r}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[(0,a.jsx)(f,{}),(0,a.jsx)(i.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(g,{})]})})}function x(e){let{className:t,children:s,...n}=e;return(0,a.jsxs)(i.q7,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(r.A,{className:"size-4"})})}),(0,a.jsx)(i.p4,{children:s})]})}function f(e){let{className:t,...s}=e;return(0,a.jsx)(i.PP,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(l.A,{className:"size-4"})})}function g(e){let{className:t,...s}=e;return(0,a.jsx)(i.wn,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(n.A,{className:"size-4"})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[210,511,702,370,671,464,371,299,647,407,158,193,987,441,684,358],()=>t(53571)),_N_E=e.O()}]);