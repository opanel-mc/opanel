(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{13052:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},24232:(e,t,n)=>{"use strict";n.d(t,{C:()=>m});var a=n(95155);n(12115);var r=n(13052),o=n(53999);function s(e){let{...t}=e;return(0,a.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...t})}function i(e){let{className:t,...n}=e;return(0,a.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,o.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t),...n})}function l(e){let{className:t,...n}=e;return(0,a.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,o.cn)("inline-flex items-center gap-1.5",t),...n})}function c(e){let{className:t,...n}=e;return(0,a.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,o.cn)("text-foreground font-normal",t),...n})}function d(e){let{children:t,className:n,...s}=e;return(0,a.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,o.cn)("[&>svg]:size-3.5",n),...s,children:null!=t?t:(0,a.jsx)(r.A,{})})}var u=n(76037),f=n(20193);function m(e){let{children:t,title:n,subTitle:r,icon:m,className:h,...p}=e;return(0,a.jsxs)("div",{className:"px-16 flex-1 flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"pt-10 pb-5 flex flex-col gap-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(f.SidebarTrigger,{className:"cursor-pointer"}),(0,a.jsx)(u.Separator,{orientation:"vertical"}),(0,a.jsx)(s,{children:(0,a.jsxs)(i,{children:[(0,a.jsx)(l,{children:"OPanel"}),(0,a.jsx)(d,{}),r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l,{children:n}),(0,a.jsx)(d,{})]}),(0,a.jsx)(l,{children:(0,a.jsx)(c,{children:null!=r?r:n})})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-5",children:[m,(0,a.jsx)("h1",{className:"text-3xl font-bold",children:null!=r?r:n})]})]}),(0,a.jsx)("div",{className:(0,o.cn)(h,"pb-16"),...p,children:t})]})}},31886:(e,t,n)=>{"use strict";n.d(t,{$M:()=>h,Hh:()=>c,Kf:()=>u,QM:()=>x,RT:()=>m,nF:()=>l,nl:()=>g,ow:()=>p,qV:()=>f,v_:()=>d,y0:()=>s,yq:()=>i});var a=n(23464),r=n(16453),o=n(56671);let s="",i=globalThis.window?"ws://".concat(window.location.host):"ws://localhost:3000",l="https://crafatar.com/avatars/",c="https://crafatar.com/skins/",d="https://crafatar.com/capes/";function u(e,t,n){for(let[a,r]of n)if(e.status===a)return void o.oR.error(t,{description:r});o.oR.error(t,{description:e.message})}async function f(e){return(await a.A.request({method:"get",url:s+e,headers:{"X-Credential-Token":(0,r.getCookie)("token")}})).data}async function m(e){return(await a.A.request({method:"get",url:s+e,headers:{"X-Credential-Token":(0,r.getCookie)("token")},responseType:"blob"})).data}async function h(e,t){let n=t?JSON.stringify(t):"";return(await a.A.request({method:"post",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain"},data:n})).data}async function p(e,t){let n=t?JSON.stringify(t):"";return(await a.A.request({method:"post",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,r.getCookie)("token")},data:n})).data}async function g(e,t){let n=t?JSON.stringify(t):"";return(await a.A.request({method:"delete",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,r.getCookie)("token")},data:n})).data}async function x(e,t,n){let o=new FormData;return o.append("file",t),(await a.A.request({method:"post",url:s+e,headers:{"Content-Type":"multipart/form-data","X-Credential-Token":(0,r.getCookie)("token")},data:o,onUploadProgress:e=>{var t;return n&&n(null!=(t=e.progress)?t:0)}})).data}},32007:(e,t,n)=>{"use strict";n.d(t,{S:()=>l,f:()=>i});var a=n(42757),r=n.n(a),o=n(56671),s=n(31886);async function i(e){let t=e.endsWith(".log.gz")?e.replace(".log.gz",".log"):e;try{let n=await (0,s.qV)("/api/logs/".concat(e));r()(n,t,"text/plain")}catch(e){(0,s.Kf)(e,"无法下载日志 ".concat(t),[[401,"未登录"],[404,"找不到该日志"]])}}async function l(e){try{await (0,s.nl)("/api/logs/".concat(e)),o.oR.success("删除成功")}catch(e){(0,s.Kf)(e,"无法删除日志",[[400,"请求参数错误"],[401,"未登录"],[404,"找不到该日志"]])}}},35695:(e,t,n)=>{"use strict";var a=n(18999);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},36713:(e,t,n)=>{Promise.resolve().then(n.bind(n,69506))},42757:function(e,t){var n,a;void 0===(a="function"==typeof(n=function(){return function e(t,n,a){var r,o,s=window,i="application/octet-stream",l=a||i,c=t,d=!n&&!a&&c,u=document.createElement("a"),f=function(e){return String(e)},m=s.Blob||s.MozBlob||s.WebKitBlob||f,h=n||"download";if(m=m.call?m.bind(s):Blob,"true"===String(this)&&(l=(c=[c,l])[0],c=c[1]),d&&d.length<2048&&(h=d.split("/").pop().split("?")[0],u.href=d,-1!==u.href.indexOf(d))){var p=new XMLHttpRequest;return p.open("GET",d,!0),p.responseType="blob",p.onload=function(t){e(t.target.response,h,i)},setTimeout(function(){p.send()},0),p}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c))if(!(c.length>2096103.424)||m===f)return navigator.msSaveBlob?navigator.msSaveBlob(v(c),h):w(c);else l=(c=v(c)).type||i;else if(/([\x80-\xff])/.test(c)){for(var g=0,x=new Uint8Array(c.length),y=x.length;g<y;++g)x[g]=c.charCodeAt(g);c=new m([x],{type:l})}function v(e){for(var t=e.split(/[:;,]/),n=t[1],a=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=a.length,o=0,s=new Uint8Array(r);o<r;++o)s[o]=a.charCodeAt(o);return new m([s],{type:n})}function w(e,t){if("download"in u)return u.href=e,u.setAttribute("download",h),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout(function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout(function(){s.URL.revokeObjectURL(u.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i)),!window.open(e)&&confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}if(r=c instanceof m?c:new m([c],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(r,h);if(s.URL)w(s.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===f)try{return w("data:"+l+";base64,"+s.btoa(r))}catch(e){return w("data:"+l+","+encodeURIComponent(r))}(o=new FileReader).onload=function(e){w(this.result)},o.readAsDataURL(r)}return!0}})?n.apply(t,[]):n)||(e.exports=a)},52815:(e,t,n)=>{"use strict";n.d(t,{FN:()=>s,Tx:()=>d,kz:()=>c,mt:()=>l});let a="opanel.settings",r=window.localStorage,o={"dashboard.monitor-interval":2e3,"terminal.word-wrap":!1,"terminal.font-size":12,"terminal.log-level":"INFO","terminal.log-time":!0,"terminal.thread-name":!0,"terminal.source-name":!0,"terminal.convert-ansi-code":!0,"monaco.word-wrap":!1,"monaco.font-size":14},s={wordWrap:l("monaco.word-wrap")?"on":"off",fontSize:l("monaco.font-size")};function i(){let e=r.getItem(a);if(!e)return d(),o;let t=JSON.parse(null!=e?e:"{}");for(let e in o)void 0===t[e]&&(t[e]=o[e]);return r.setItem(a,JSON.stringify(t)),t}function l(e){return i()[e]}function c(e,t){let n=i();n[e]=t,r.setItem(a,JSON.stringify(n))}function d(){r.setItem(a,JSON.stringify(o))}},62525:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},69506:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var a=n(95155),r=n(12115),o=n(91788),s=n(62525),i=n(35695),l=n(91364),c=n(51362),d=n(24232),u=n(31886),f=n(97168),m=n(32007),h=n(52815);function p(){let e=(0,i.useSearchParams)(),{push:t}=(0,i.useRouter)(),[n,p]=(0,r.useState)(""),{theme:g}=(0,c.D)(),x=(0,r.useRef)(null),y=e.get("log"),v=(0,r.useCallback)(async()=>{try{let e=await (0,u.qV)("/api/logs/".concat(y));p(e)}catch(e){(0,u.Kf)(e,"无法获取日志内容",[[400,"请求参数错误"],[401,"未登录"],[404,"找不到该日志"],[500,"服务器内部错误"]])}},[y]);return(0,r.useEffect)(()=>{x.current&&x.current.setValue(n)},[n]),(0,r.useEffect)(()=>{v()},[v]),y||t("/panel/logs"),(0,a.jsxs)(d.C,{title:"日志",subTitle:null!=y?y:"",children:[(0,a.jsxs)("div",{className:"mb-3 flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["文件类型：",(null==y?void 0:y.endsWith(".log.gz"))?"gzip (已解压)":"log"]}),(0,a.jsxs)("div",{className:"[&>*]:cursor-pointer",children:[(0,a.jsx)(f.$,{variant:"ghost",size:"icon",title:"下载日志",onClick:()=>(0,m.f)(null!=y?y:""),children:(0,a.jsx)(o.A,{})}),(0,a.jsx)(f.$,{variant:"ghost",size:"icon",title:"删除日志",onClick:async()=>{await (0,m.S)(null!=y?y:""),t("/panel/logs")},children:(0,a.jsx)(s.A,{})})]})]}),(0,a.jsx)(l.Ay,{height:"500px",defaultLanguage:"txt",defaultValue:n,theme:"dark"===g?"vs-dark":"vs",options:{readOnly:!0,readOnlyMessage:{value:"日志不可编辑"},...h.FN},onMount:e=>x.current=e})]})}},91788:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[455,702,370,671,464,647,193,441,684,358],()=>t(36713)),_N_E=e.O()}]);